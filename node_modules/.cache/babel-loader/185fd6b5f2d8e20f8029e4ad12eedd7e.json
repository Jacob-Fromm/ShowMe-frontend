{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/jsfromm/Flatiron/code/mod5/project/ShowMe-frontend/src/App.js\";\nimport logo from \"./logo.svg\";\nimport 'fontsource-roboto';\nimport { Typography } from '@material-ui/core';\nimport './App.css';\nimport React, { Component } from \"react\";\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect, withRouter } from \"react-router-dom\";\nimport Welcome from \"./Components/Welcome\";\nimport SignupComedian from './Components/SignupComedian';\nimport ComedianProfile from './Components/ComedianPreview';\nimport ComediansContainer from \"./Containers/ComediansContainer\";\nimport Header from \"./Components/Header\";\nimport { connect } from 'react-redux';\nimport { getShows, getComics, getFans, setUser } from \"./Redux/actions\";\nimport Links from \"./Components/NavBar\";\nimport AppWrapper from \"./Components/AppWrapper\";\nimport Login from \"./Components/Login\";\nimport FanPage from \"./Containers/FanPage\";\nimport NewLogin from \"./Components/NewLogin\";\nimport NewSignup from \"./Components/NewSignup\";\nimport shadows from '@material-ui/core/styles/shadows';\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentUser: this.props.currentUser,\n      isLoggedIn: this.props.isLoggedIn,\n      api: []\n    };\n\n    this.logoutHandler = () => {\n      localStorage.removeItem(\"token\");\n      this.props.history.push(\"/\");\n      this.props.saveUser(null);\n    };\n  }\n\n  componentDidMount() {\n    // this.props.fetchShows()\n    // this.props.fetchComics()\n    // this.props.fetchFans()\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      fetch(\"http://localhost:3000/api/v1/profile\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(resp => resp.json()).then(data => this.props.saveUser(data));\n    } else {\n      this.props.history.push(\"/login\");\n    }\n  }\n\n  render() {\n    console.log(\"redux state in app\", this.props.state);\n    console.log(\"current user\", this.props.state.currentUser);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(Links, {\n          clickHandler: this.logoutHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/comedians\",\n          render: () => /*#__PURE__*/_jsxDEV(ComediansContainer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/welcome\",\n          render: routerProps => /*#__PURE__*/_jsxDEV(Welcome, {\n            routerProps: routerProps\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 59\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/profile\",\n          component: this.props.state.currentUser ? () => /*#__PURE__*/_jsxDEV(FanPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 23\n          }, this) : () => /*#__PURE__*/_jsxDEV(NewLogin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 23\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/login\",\n          render: () => /*#__PURE__*/_jsxDEV(NewLogin, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 46\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/signup\",\n          render: routerProps => /*#__PURE__*/_jsxDEV(NewSignup, {\n            routerProps: routerProps\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 58\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          component: AppWrapper\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nconst mdp = dispatch => {\n  return {\n    fetchShows: () => dispatch(getShows()),\n    fetchComics: () => dispatch(getComics()),\n    fetchFans: () => dispatch(getFans()),\n    saveUser: userObj => dispatch(setUser(userObj))\n  };\n};\n\nconst msp = state => {\n  return {\n    state: state\n  };\n};\n\nexport default withRouter(connect(msp, mdp)(App));","map":{"version":3,"sources":["/Users/jsfromm/Flatiron/code/mod5/project/ShowMe-frontend/src/App.js"],"names":["Typography","React","Component","BrowserRouter","Router","Switch","Route","Link","Redirect","withRouter","Welcome","SignupComedian","ComedianProfile","ComediansContainer","Header","connect","getShows","getComics","getFans","setUser","Links","AppWrapper","Login","FanPage","NewLogin","NewSignup","shadows","App","state","currentUser","props","isLoggedIn","api","logoutHandler","localStorage","removeItem","history","push","saveUser","componentDidMount","token","getItem","fetch","method","headers","Authorization","then","resp","json","data","render","console","log","routerProps","mdp","dispatch","fetchShows","fetchComics","fetchFans","userObj","msp"],"mappings":"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","sourcesContent":["import logo from './logo.svg';\nimport 'fontsource-roboto';\nimport { Typography } from '@material-ui/core';\nimport './App.css';\nimport React, {Component} from \"react\"\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n  withRouter\n} from \"react-router-dom\"; \nimport Welcome from \"./Components/Welcome\"\nimport SignupComedian from './Components/SignupComedian';\nimport ComedianProfile from './Components/ComedianPreview';\nimport ComediansContainer from \"./Containers/ComediansContainer\"\nimport Header from \"./Components/Header\"\nimport { connect } from 'react-redux'\nimport { getShows, getComics, getFans, setUser } from \"./Redux/actions\"\nimport Links from \"./Components/NavBar\"\nimport AppWrapper from \"./Components/AppWrapper\"\nimport Login from \"./Components/Login\"\nimport FanPage from \"./Containers/FanPage\"\nimport NewLogin from \"./Components/NewLogin\"\nimport NewSignup from \"./Components/NewSignup\"\nimport shadows from '@material-ui/core/styles/shadows';\n\nclass App extends React.Component {\n\n  state = {\n    currentUser: this.props.currentUser,\n    isLoggedIn: this.props.isLoggedIn,\n    api: []\n  }\n\n  componentDidMount(){\n    // this.props.fetchShows()\n    // this.props.fetchComics()\n    // this.props.fetchFans()\n    const token = localStorage.getItem(\"token\")\n    if (token) {\n      fetch(\"http://localhost:3000/api/v1/profile\", {\n        method: \"GET\",\n        headers: { Authorization: `Bearer ${token}` },\n      })\n        .then(resp=>resp.json())\n        .then(data => this.props.saveUser(data))\n    } else {\n      this.props.history.push(\"/login\")\n    }\n  }\n\n  logoutHandler = () => {\n    localStorage.removeItem(\"token\")\n    this.props.history.push(\"/\")\n    this.props.saveUser(null)\n  }\n\n  \n  render(){\n    \n      console.log(\"redux state in app\", this.props.state)\n      console.log(\"current user\", this.props.state.currentUser)\n      return (\n        <>\n        <div className=\"header\">\n            <Links clickHandler={this.logoutHandler}/>\n            <Header />\n        </div>\n        <Switch>\n          <Route path=\"/comedians\" render={() => <ComediansContainer /> } />\n          <Route path=\"/welcome\" render={(routerProps) => < Welcome routerProps={routerProps} />} />\n          <Route exact path=\"/profile\" component={\n              this.props.state.currentUser ? \n                () => <FanPage />\n              : \n                () => <NewLogin />\n              }/>\n          <Route path=\"/login\" render={() => <NewLogin />} />\n          <Route path=\"/signup\" render={(routerProps) => <NewSignup routerProps={routerProps}/>} />\n          <Route exact path=\"/\" component={AppWrapper} />\n        </Switch>\n\n        </>\n      );\n  }\n  \n}\n\nconst mdp = (dispatch) => {\n  return { fetchShows: () => dispatch(getShows()), \n    fetchComics: () => dispatch(getComics()), \n    fetchFans: () => dispatch(getFans()),\n    saveUser: (userObj) => dispatch(setUser(userObj)) }\n\n}\n\nconst msp = (state) => {\n  return {state: state}\n}\n\nexport default withRouter(connect(msp, mdp)((App)))\n"]},"metadata":{},"sourceType":"module"}